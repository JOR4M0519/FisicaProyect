<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>EZPhysic</title>
  <link rel="shortcut icon" href="assets/img/logoico.ico">
  <!-- BOOTSTRAP CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-0evHe/X+R7YkIZDRvuzKMRqM+OrBnVFBL6DOitfPri4tjfHxaWutUpFmBp4vmVor" crossorigin="anonymous">
  <!-- BOOTSTRAP JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-pprn3073KE6tl6bjs2QrFaJGz5/SUsLqktiwsUTF55Jfv3qYSDhgCecCxMW52nD2"
    crossorigin="anonymous"></script>
  <!-- FONT AWESOME -->
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css"
    integrity="sha384-DNOHZ68U8hZfKXOrtjWvjxusGo9WQnrNx2sqG0tfsghAvtVlRW3tvkXWZh58N9jp" crossorigin="anonymous">
  <!-- CUSTOM CSS -->
  <link rel="stylesheet" href="assets/styles/index.css">
  <link rel="stylesheet" href="assets/styles/calculator.css">
  <link rel="stylesheet" href="assets/styles/fondo.css">

  <script src="https://code.jquery.com/jquery-3.4.1.js"></script>
  <script src="https://kit.fontawesome.com/a076d05399.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.8.0/chart.min.js"></script>


</head>

<body>
  <input type="hidden" id="cantidadResistencias" value="1">
  <div style="padding-top: 0%;">
    <div
      style="width: 100%; height: 100%; align-items: center; display: flex; flex-direction: column; justify-content: center;">

      <h1>Resistencia en Circuitos</h1><br>

      <h2>Tipo de circuito</h2>
      <div class="input-group input-group-sm mb-3"
        style="padding-left: 15%; padding-right: 15%; justify-content: center;">
        <label class="form-uncheck-label" for="reverseCheck1">Serie &nbsp;</label>
        <div class="form-check form-switch">
          <input class="form-check-input bg-primary" type="checkbox" role="switch" id="cb1" checked>
          <label class="form-check-label" for="flexSwitchCheckDefault">Paralelo</label>
        </div>
      </div>

      <h3>Resistencias</h3>

      <div class="input-group input-group-sm mb-3" id="divresistencias" style="padding-left: 15%; padding-right: 15%;">

        <div id="divresistencia1" class="input-group input-group-sm mb-3">
          <span class="input-group-text" id="inputGroup-sizing-sm">Resistencia 1</span>
          <input type="text" id="resistencia1" class="form-control" aria-label="Sizing example input"
            aria-describedby="inputGroup-sizing-sm">
          <span class="input-group-text" id="inputGroup-sizing-sm">Ω</span>
          <span class="input-group-text" id="X10R1">x10</span>
          <input type="text" class="form-control" id="eresistencia1" aria-label="Sizing example input"
            aria-describedby="inputGroup-sizing-sm" style="margin-right: 3%;">
          <div class="form-check form-switch">
            <input class="form-check-input" type="checkbox" role="switch" id="flexSwitchCheckDefault" id="cbc1"
              value="X10R1/eresistencia1/resistencia1" onclick="checkbox(this)" checked>
            <label class="form-check-label" for="flexSwitchCheckDefault">Notación</label>
          </div>
        </div>

      </div>
      <div class="btn-group" role="group" aria-label="Basic example"
        style="width: 100%; padding-left: 15%; padding-right: 15%; margin-left: -7%;">
        <button type="button" id="addResistencia" class="btn btn-dark">Añadir Resistencia</button>
        <button type="button" id="deleteResistencia" class="btn btn-dark">Eliminar Resistencia</button>
        <button type="button" id="btnResultado" class="btn btn-dark">Resultado</button>
      </div><br><br>

      <div class="input-group input-group-sm mb-3" style="padding-left: 15%; padding-right: 15%;">
        <span class="input-group-text" id="inputGroup-sizing-sm">resistencia total</span>
        <input type="text" id="resultado" class="form-control" aria-label="Sizing example input"
          aria-describedby="inputGroup-sizing-sm" disabled>
        <span class="input-group-text" id="inputGroup-sizing-sm">Ω</span>
        <span class="input-group-text" id="x10R">x10 E</span>
        <input type="text" id="eResultado" class="form-control" aria-label="Sizing example input"
          aria-describedby="inputGroup-sizing-sm">
      </div>

    </div>
  </div>

  <script src="./assets/js/checkbox.js"> </script>

  <script>
    document.getElementById('addResistencia').addEventListener('click', function () {



      var num = parseInt(document.getElementById('cantidadResistencias').value) + 1;
      if (num >= 11) {
        alert('Maxima cantidad de Resistencias');
      } else {

        document.getElementById('divresistencias').innerHTML +=
          `<br id="br${num}">
      <div id="divresistencia${num}" class="input-group input-group-sm mb-3">
          <span class="input-group-text" id="inputGroup-sizing-sm">Resistencia ${num}</span>
          <input type="text" id="resistencia${num}" class="form-control" aria-label="Sizing example input"
            aria-describedby="inputGroup-sizing-sm">
          <span class="input-group-text" id="inputGroup-sizing-sm">Ω</span>
          <span class="input-group-text" id="X10R${num}">x10</span>
          <input type="text" class="form-control" id="eresistencia${num}" aria-label="Sizing example input"
            aria-describedby="inputGroup-sizing-sm" style="margin-right: 3%;">
            <div class="form-check form-switch">
              <input class="form-check-input" type="checkbox" role="switch" id="flexSwitchCheckDefault" id="cbc${num}"
                value="X10R${num}/eresistencia${num}/resistencia${num}" onclick="checkbox(this)" checked>
              <label class="form-check-label" for="flexSwitchCheckDefault">Notación</label>
            </div>
        </div>`;
        document.getElementById('cantidadResistencias').value = num;
      }
    })

    document.getElementById('btnResultado').addEventListener('click', function () {


      var resistencia = 0;

      if (document.getElementById('cb1').checked==false) {
        for (var i = 1; i <= parseInt(document.getElementById('cantidadResistencias').value); i++) {

          var c1 = parseFloat(document.getElementById(`resistencia${i}`).value) * Math.pow(10, (parseFloat(document.getElementById(`eresistencia${i}`).value)));
          
          resistencia = resistencia+ c1;
          console.log(resistencia);

        }
      } else {
        for (var i = 1; i <= parseInt(document.getElementById('cantidadResistencias').value); i++) {
          var c1 = parseFloat(document.getElementById(`resistencia${i}`).value) * Math.pow(10, (parseFloat(document.getElementById(`eresistencia${i}`).value)));

          resistencia += (1 / c1);
          console.log('olo');
        }
        resistencia = (1 / parseFloat(resistencia));
      }


      if (isNaN(resistencia) == true) { alert('Error, datos invalidos') } else {

        var exponencial = parseFloat(resistencia).toExponential(5);
        var resultado = exponencial.split('e');


        document.getElementById('resultado').value = resultado[0];
        document.getElementById('eResultado').value = resultado[1];
      }

    });

    document.getElementById('deleteResistencia').addEventListener('click', function () {

      var num = document.getElementById('cantidadResistencias').value;
      if (num <= 1) {
        alert('No hay resistencias que se puedan eliminar');
      } else {
        $(`#divresistencia${num}`).remove();
        $(`#br${num}`).remove();
        document.getElementById('cantidadResistencias').value = parseInt(num) - 1;
      }
    });

  </script>
</body>