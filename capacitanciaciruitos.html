<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>EZPhysic</title>
  <link rel="shortcut icon" href="assets/img/logoico.ico">
  <!-- BOOTSTRAP CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-0evHe/X+R7YkIZDRvuzKMRqM+OrBnVFBL6DOitfPri4tjfHxaWutUpFmBp4vmVor" crossorigin="anonymous">
  <!-- BOOTSTRAP JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-pprn3073KE6tl6bjs2QrFaJGz5/SUsLqktiwsUTF55Jfv3qYSDhgCecCxMW52nD2"
    crossorigin="anonymous"></script>
  <!-- FONT AWESOME -->
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css"
    integrity="sha384-DNOHZ68U8hZfKXOrtjWvjxusGo9WQnrNx2sqG0tfsghAvtVlRW3tvkXWZh58N9jp" crossorigin="anonymous">
  <!-- CUSTOM CSS -->
  <link rel="stylesheet" href="assets/styles/index.css">
  <link rel="stylesheet" href="assets/styles/calculator.css">
  <link rel="stylesheet" href="assets/styles/fondo.css">

  <script src="https://code.jquery.com/jquery-3.4.1.js"></script>
  <script src="https://kit.fontawesome.com/a076d05399.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.8.0/chart.min.js"></script>


</head>

<body>
  <input type="hidden" id="cantidadCapacitores " value="1">
  <div style="padding-top: 0%;">
    <div
      style="width: 100%; height: 100%; align-items: center; display: flex; flex-direction: column; justify-content: center;">

      <h1>Capacitancia en Circuitos</h1><br>

      <h2>Tipo de circuito</h2>
      <div class="input-group input-group-sm mb-3" style="padding-left: 30%; padding-right: 30%; justify-content: center;">
        <label class="form-uncheck-label" for="reverseCheck1">Serie &nbsp;</label>
        <div class="form-check form-switch">
            <input class="form-check-input bg-primary" type="checkbox" role="switch" id="reverseCheck1" id=""
            value="" checked>
            <label class="form-check-label" for="flexSwitchCheckDefault">Paralelo</label>
        </div>
      </div>

      <h3>Capacitores</h3>

      <div id="divCargas" style="padding-left: 30%; padding-right: 30%;">
        <div class="input-group input-group-sm mb-3">
          <span class="input-group-text" id="inputGroup-sizing-sm">Capacitancia</span>
          <input type="text" id="carga1" class="form-control" aria-label="Sizing example input"
            aria-describedby="inputGroup-sizing-sm">
          <span class="input-group-text" id="inputGroup-sizing-sm">F</span>
          <span class="input-group-text" id="x10C1">x10</span>
          <input type="text" class="form-control" id="eCarga1" aria-label="Sizing example input"
            aria-describedby="inputGroup-sizing-sm" style="margin-right: 3%;">
          <div class="form-check form-switch">
            <input class="form-check-input" type="checkbox" role="switch" id="flexSwitchCheckDefault" id="cbc1"
              value="x10C1/eCarga1/carga1" onclick="checkbox(this)" checked>
            <label class="form-check-label" for="flexSwitchCheckDefault">Notación</label>
          </div>
        </div>

      </div>
      <div class="btn-group" role="group" aria-label="Basic example"
        style="width: 100%; padding-left: 30%; padding-right: 30%; margin-left: -7%;">
        <button type="button" id="addCapacitor" class="btn btn-dark">Añadir Capacitor</button>
        <button type="button" id="btnResultado" class="btn btn-dark">Resultado</button>
      </div><br><br>

      <div class="input-group input-group-sm mb-3" style="padding-left: 30%; padding-right: 30%;">
        <span class="input-group-text" id="inputGroup-sizing-sm">Capacitancia total</span>
        <input type="text" id="resultado"class="form-control" aria-label="Sizing example input"
          aria-describedby="inputGroup-sizing-sm" disabled>
        <span class="input-group-text" id="inputGroup-sizing-sm">F</span>
      </div>

    </div>
  </div>

  <script src="./assets/js/checkbox.js"> </script>

  <script>
    document.getElementById('addCapacitor').addEventListener('click', function () {



      var num = parseInt(document.getElementById('cantidadCapacitores').value) + 1;
      if (num >= 11) {
        alert('Maxima cantidad de capacitores');
      } else {

        document.getElementById('divCargas').innerHTML +=
          `<br>
      <div class="input-group input-group-sm mb-3">
          <span class="input-group-text" id="inputGroup-sizing-sm">Capacitancia ${num}</span>
          <input type="text" id="capacitancia${num}" class="form-control" aria-label="Sizing example input"
            aria-describedby="inputGroup-sizing-sm">
          <span class="input-group-text" id="inputGroup-sizing-sm">F</span>
          <span class="input-group-text" id="x10F${num}">x10</span>
          <input type="text" class="form-control" id="eCapacitancia${num}" aria-label="Sizing example input"
            aria-describedby="inputGroup-sizing-sm" style="margin-right: 3%;">
            <div class="form-check form-switch">
              <input class="form-check-input" type="checkbox" role="switch" id="flexSwitchCheckDefault" id="cbc${num}"
                value="x10F${num}/eCapacitancia${num}/capacitancia${num}" onclick="checkbox(this)" checked>
              <label class="form-check-label" for="flexSwitchCheckDefault">Notación</label>
            </div>
        </div>`;
        document.getElementById('cantidadCapacitores').value = num;
      }
    })

    document.getElementById('btnResultado').addEventListener('click', function(){
    var campoX = 0;
    var campoY = 0;
    var x1 = document.getElementById('xp1').value;
    var y1 = document.getElementById('yp1').value;

    for (var i = 1; i <= parseInt(document.getElementById('cantidadCapacitores').value); i++) {

      var x2 = document.getElementById(`x${i}`).value;
      var y2 = document.getElementById(`y${i}`).value;
      var distancia = Math.sqrt((Math.pow((x2 - x1), 2)) + (Math.pow((y2 - y1), 2)));

      var carga1 = document.getElementById(`carga${i}`).value;
      var eCarga = document.getElementById(`eCarga${i}`).value;

      var campo = ((9 * (Math.pow(10, 9))) * (carga1 * (Math.pow(10, eCarga)))) / (Math.pow(distancia, 2));

      campoX += (campo * ((Math.abs(x2 - x1)) / distancia));
      campoY += (campo * ((Math.abs(y2 - y1)) / distancia));

    }

    var resultado = Math.sqrt((Math.pow(campoX, 2)) + (Math.pow(campoY, 2)));

    if(isNaN(resultado)==true){ alert('Error, datos invalidos')}else{
      document.getElementById('resultado').value=resultado;
    }  

  });

  </script>
</body>